<br>

<p align="center">
    <img src="/docs/images/banner.svg" alt="Extension Banner" width="90%">
</p>

<br>

<p align="center">
    <a href="https://github.com/Screenly/Browser-Extension/actions/workflows/build.yaml?query=branch%3Amaster">
        <img alt="GitHub Actions Workflow Status"
            src="https://img.shields.io/github/actions/workflow/status/Screenly/Browser-Extension/build.yaml?label=Build%20Browser%20Extensions&branch=master&style=for-the-badge">
    </a>
    <a href="https://github.com/Screenly/Browser-Extension/actions/workflows/lint-and-format.yaml?query=branch%3Amaster">
        <img alt="GitHub Actions Workflow Status" src="https://img.shields.io/github/actions/workflow/status/Screenly/Browser-Extension/lint-and-format.yaml?branch=master&style=for-the-badge&label=ESLint and Prettier">
    </a>
    <a href="https://app.sbomify.com/component/NwxGnn8u8K">
        <img src="https://img.shields.io/badge/_-sbomified-8A2BE2?style=for-the-badge&logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU3IiBoZWlnaHQ9IjI1NyIgdmlld0JveD0iMCAwIDI1NyAyNTciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjEyOC41IiBjeT0iMTI4LjUiIHI9IjEyOC41IiBmaWxsPSIjMTQxMDM1Ii8+CjxwYXRoIGQ9Ik02My45Mzc5IDgwLjAwMDlDNTcuNTM3NCA3OS45MTMyIDU3LjUyNDkgODkuOTk4OSA2My45Mzc5IDg5LjkxMTJIOTcuNzI4NUMxMDQuMTU0IDkwLjAyNCAxMDQuMTY3IDc5Ljg4ODIgOTcuNzI4NSA4MC4wMDA5SDYzLjkzNzlaTTExMy43OCA4MC4wMDA5QzEwNy40MDQgNzkuOTEzMiAxMDcuMzY3IDg5Ljk5ODkgMTEzLjc4IDg5LjkxMTJIMTk0LjA3NUMxOTYuOCA4OS45MTEyIDE5OSA4Ny42OTM2IDE5OSA4NC45NzQ5QzE5OSA4Mi4yMzExIDE5Ni44IDgwLjAxMzUgMTk0LjA3NSA4MC4wMTM1SDExMy43OFY4MC4wMDA5Wk02My45Mzc5IDk3LjE0MDRDNTcuNTQ5OSA5Ny4wNTI3IDU3LjUxMjQgMTA3LjE1MSA2My45Mzc5IDEwNy4wNTFIMTE5LjM1NUMxMjIuMDgxIDEwNy4wNTEgMTI0LjI4MSAxMDQuODMzIDEyNC4yODEgMTAyLjEwMkMxMjQuMjkzIDk5LjM3MDUgMTIyLjA4MSA5Ny4xNDA0IDExOS4zNTUgOTcuMTQwNEg2My45Mzc5Wk02My45Mzc5IDExNC4zMDVDNTcuNTYyNCAxMTQuMjE3IDU3LjUxMjQgMTI0LjI3OCA2My45Mzc5IDEyNC4xOUgxNDQuNjdDMTQ3LjM5NSAxMjQuMTkgMTQ5LjU5NiAxMjEuOTcyIDE0OS41OTYgMTE5LjI1NEMxNDkuNTk2IDExNi41MjIgMTQ3LjM4MyAxMTQuMzE3IDE0NC42NyAxMTQuMzE3SDYzLjkzNzlWMTE0LjMwNVpNMTk0LjA3NSAxNzYuOTk5QzIwMC40NzUgMTc3LjA4NyAyMDAuNDg4IDE2Ny4wMDEgMTk0LjA3NSAxNjcuMDg5SDE2MC4yODRDMTUzLjg1OCAxNjYuOTc2IDE1My44NDYgMTc3LjExMiAxNjAuMjg0IDE3Ni45OTlIMTk0LjA3NVpNMTQ0LjIyIDE3Ni45OTlDMTUwLjU5NiAxNzcuMDg3IDE1MC42MzMgMTY3LjAwMSAxNDQuMjIgMTY3LjA4OUg2My45MjU0QzYxLjIxMjcgMTY3LjEwMSA1OSAxNjkuMzA2IDU5IDE3Mi4wMzhDNTkgMTc0Ljc4MSA2MS4yMDAyIDE3Ni45OTkgNjMuOTI1NCAxNzYuOTk5SDE0NC4yMlpNMTk0LjA3NSAxNTkuODZDMjAwLjQ2MyAxNTkuOTQ3IDIwMC41IDE0OS44NDkgMTk0LjA3NSAxNDkuOTQ5SDEzOC42NTdDMTM1LjkzMiAxNDkuOTQ5IDEzMy43MzIgMTUyLjE2NyAxMzMuNzMyIDE1NC44OThDMTMzLjcxOSAxNTcuNjMgMTM1LjkzMiAxNTkuODYgMTM4LjY1NyAxNTkuODZIMTk0LjA3NVpNMTk0LjA3NSAxNDIuNjk1QzIwMC40NSAxNDIuNzgzIDIwMC41IDEzMi43MjIgMTk0LjA3NSAxMzIuODFIMTEzLjM0MkMxMTAuNjE3IDEzMi44MSAxMDguNDE3IDEzNS4wMjggMTA4LjQxNyAxMzcuNzQ2QzEwOC40MTcgMTQwLjQ3OCAxMTAuNjMgMTQyLjY4MyAxMTMuMzQyIDE0Mi42ODNIMTk0LjA3NVYxNDIuNjk1WiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzM5Nl8yOTcpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMzk2XzI5NyIgeDE9IjU5IiB5MT0iMTI4LjUiIHgyPSIyMDIuMjMzIiB5Mj0iMTQxLjU2NyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBvZmZzZXQ9IjAuMDYiIHN0b3AtY29sb3I9IiM0MDU5RDAiLz4KPHN0b3Agb2Zmc2V0PSIwLjU1NSIgc3RvcC1jb2xvcj0iI0NDNThCQiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGNEI1N0YiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K">
    </a>
    <br>
    <a noopener" href="https://chromewebstore.google.com/detail/save-to-screenly/kcoehkngnbhlmdcgcadliaadlmbjmcln">
      <img alt="Chrome Web Store Version" src="https://img.shields.io/chrome-web-store/v/kcoehkngnbhlmdcgcadliaadlmbjmcln?style=for-the-badge&logo=google-chrome">
    </a>
    <a href="https://addons.mozilla.org/en-US/firefox/addon/save-to-screenly/">
      <img alt="Mozilla Add-on Version" src="https://img.shields.io/amo/v/save-to-screenly?style=for-the-badge&logo=firefox-browser">
    </a>
</p>

<br>

<p align="center">
    <strong>Easily add content to your Screenly digital signage displays in a few clicks. :sparkles:</strong>
</p>

<br>

## :white_check_mark: Prerequisites

- Linux or macOS &mdash; If you're on Windows, you can use [WSL](https://learn.microsoft.com/en-us/windows/wsl/setup/environment). All of the scripts were written in Bash.
- Docker &mdash; The easiest way to get started is to install [Docker Desktop](https://www.docker.com/products/docker-desktop/).
- `jq` &mdash; Most of the scripts in the [`bin/`](/bin/) directory use `jq` to parse JSON. Install it from [here](https://jqlang.org/download/).

## :seedling: Install

- Install the extension from the [Chrome Web Store](https://chromewebstore.google.com/detail/save-to-screenly/kcoehkngnbhlmdcgcadliaadlmbjmcln).
- Install the extension from Firefox [Add Ons](https://addons.mozilla.org/en-US/firefox/addon/save-to-screenly/).

## :computer: Develop

The extension is built using [webpack](https://webpack.js.org/). Please check our [contributing guidelines](CONTRIBUTING.md) for detailed information about opening pull requests and releasing new versions.

```bash
$ PLATFORM=<PLATFORM> \
  VERSION=<VERSION> \
    ./bin/start_development_mode.sh
```

> [!IMPORTANT]
>
> - `VERSION` can be any valid version semver string (`X.Y.Z`),
>   where `X`, `Y`, and `Z` are non-negative numbers.
> - `PLATFORM` can be either `chrome` or `firefox`.

Now load the content of the `dist/` folder as an unpacked extension in Chrome. As you make changes to the code, the extension is automatically rebuilt.

### Getting Inside the Docker Container

```bash
$ docker compose exec browser-extension bash
```

### Distribute

```bash
$ VERSION=<VERSION> \
  PLATFORM=<PLATFORM> \
    ./bin/package_extension.sh
```

The name of the packaged extension will be `screenly-<PLATFORM>-extension-<VERSION>.zip`. For example, `screenly-chrome-extension-0.0.1.zip` or `screenly-firefox-extension-0.0.1.zip`.

### Testing Packaged Extensions

> [!NOTE]
> You can also download the packaged extensions from the [GitHub Releases](https://github.com/Screenly/Browser-Extension/releases) page.

#### Chrome

- Extract the zip file to a folder.
- Open Chrome and navigate to `chrome://extensions/`.
- Click on **Load unpacked** and select the folder you extracted the zip file to.
- The extension should now be loaded and ready to use.

#### Firefox

> [!IMPORTANT]
> Add-ons installed from a `.zip` file will be uninstalled when Firefox is closed.
> This means that you will need to re-install the extension every time you open Firefox.

- Open Firefox and navigate to `about:debugging`.
- Click on **This Firefox** and then **Load Temporary Add-on**.
- You can either select the `manifest.json` file or the zipped extension.
- The extension should now be loaded and ready to use.

## :test_tube: Run Unit Tests

```bash
$ ./bin/run_tests.sh

DD MM YYYY HH:MM:SS.mmm:INFO [karma-server]: Karma v6.4.4 server started at http://localhost:9876/
DD MM YYYY HH:MM:SS.mmm:INFO [launcher]: Launching browsers ChromeHeadlessNoSandbox with concurrency unlimited
DD MM YYYY HH:MM:SS.mmm:INFO [launcher]: Starting browser ChromeHeadless
DD MM YYYY HH:MM:SS.mmm:INFO [Chrome Headless 78.0.3882.0 (Linux x86_64)]: Connected on socket [SOCKET_ID] with id [ID]
Chrome Headless 78.0.3882.0 (Linux x86_64): Executed 20 of 20 SUCCESS (0.02 secs / 0.01 secs)
TOTAL: 20 SUCCESS
```

## :sparkles: Run Linter and Formatter

Build the Docker image, which is a one-time operation:

```bash
$ docker compose build
```

### :broom: Run Linter

```bash
$ ./bin/run_eslint.sh src/
```

This will run ESLint on the codebase and show any style issues or potential problems that need to be fixed.

### :nail_care: Run Formatter

This project uses [Prettier](https://prettier.io/) to format the code.
For more information why the linter and formatter are separate, see [this article about ESLint deprecating formatting rules](https://eslint.org/blog/2023/10/deprecating-formatting-rules/).

To check the code for formatting issues without changing any files, use the `check` mode:

```bash
$ MODE="check" ./bin/run_formatter.sh
```

To format the code and fix formatting issues, use the `write` mode:

```bash
$ MODE="write" ./bin/run_formatter.sh
```
